const windowWPZ=window.wpzoom=window.wpzoom||{};var WPZCached=null;!function(l){const t=l("#tmpl-elementor-add-section");if(0<t.length){let e=t.text();function a(){l(".dialog-lightbox-loading").show(),l(".dialog-lightbox-content").hide()}function r(){l(".dialog-lightbox-content").show(),l(".dialog-lightbox-loading").hide()}function o(){var e=0<jQuery(this).parents(".elementor-section-wrap").length?jQuery(this).parents(".elementor-add-section").index():-1;windowWPZ.insertIndex=e,elementorCommon&&(windowWPZ.wpzModal||(windowWPZ.wpzModal=elementorCommon.dialogsManager.createWidget("lightbox",{id:"wpzoom-elementor-template-library-modal",className:"elementor-templates-modal",message:"",hide:{auto:!1,onClick:!1,onOutsideClick:!1,onOutsideContextMenu:!1,onBackgroundClick:!0},position:{my:"center",at:"center"},onShow:function(){const e=windowWPZ.wpzModal.getElements("header");l(".elementor-templates-modal__header").length||e.append(wp.template("wpzoom-elementor-templates-modal__header"));const t=windowWPZ.wpzModal.getElements("content");l("#elementor-template-library-filter-toolbar-remote").length||t.append(wp.template("wpzoom-elementor-template-library-tools")),l("#wpzoom-elementor-templates-header").length||t.append('<div id="wpzoom-elementor-templates-header" class="wrap"></div>'),l("#wpzoom_main_library_templates_panel").length||t.append('<div id="wpzoom_main_library_templates_panel" class="wpzoom__main-view"></div>'),"dark"!==elementor.settings.editorPreferences.model.get("ui_theme")?l("#wpzoom_main_library_templates_panel").removeClass("wpzoom-dark-mode"):l("#wpzoom_main_library_templates_panel").addClass("wpzoom-dark-mode");const o=windowWPZ.wpzModal.getElements("loading");l("#elementor-template-library-loading").length||o.append(wp.template("wpzoom-elementor-template-library-loading"));var a=new Event("modal-close");l("#wpzoom-elementor-templates").on("click",".close-modal",function(){return document.dispatchEvent(a),windowWPZ.wpzModal.hide(),!1}),l(".elementor-templates-modal__header__close").click(function(){return windowWPZ.wpzModal.hide()}),n(),l("#wpzoom-elementor-template-library-filter-theme").select2({placeholder:"Theme",allowClear:!0,width:150})},onHide:function(){"dark"!==elementor.settings.editorPreferences.model.get("ui_theme")?l("#wpzoom_main_library_templates_panel").removeClass("wpzoom-dark-mode"):l("#wpzoom_main_library_templates_panel").addClass("wpzoom-dark-mode")}}),windowWPZ.wpzModal.getElements("message").append(windowWPZ.wpzModal.addElement("content"),windowWPZ.wpzModal.addElement("loading"))),windowWPZ.wpzModal.show())}e=e.replace('<div class="elementor-add-section-drag-title','<div class="elementor-add-section-area-button elementor-add-wpzoom-templates-button" title="WPZOOM Library"> <i class="eicon-folder"></i> </div> <div class="elementor-add-section-drag-title'),t.text(e),elementor.on("preview:loaded",function(){l(elementor.$previewContents[0].body).on("click",".elementor-add-wpzoom-templates-button",o)}),windowWPZ.wpzModal=null}var i=function(o){l(".wpzoom-btn-template-insert:not(.wpzoom-restricted), .elementor-template-library-template-action").unbind("click"),l(".wpzoom-btn-template-insert:not(.wpzoom-restricted), .elementor-template-library-template-action").click(function(){var e=l(this).attr("data-template-name");null!=e&&(e+=".json",a(),l.post(ajaxurl,{action:"get_content_from_elementor_export_file",filename:e},function(e){e=JSON.parse(e),-1==o?elementor.getPreviewView().addChildModel(e,{silent:0}):elementor.getPreviewView().addChildModel(e,{at:o,silent:0}),elementor.channels.data.trigger("template:after:insert",{}),null!=$e&&void 0!==$e.internal?$e.internal("document/save/set-is-modified",{status:!0}):elementor.saver.setFlagEditorChange(!0),a(),windowWPZ.wpzModal.hide()}).fail(function(e){elementor.templates.showErrorDialog("The template couldnâ€™t be imported. Please try again or get in touch with the WPZOOM team."),r()}))}),l("#wpzoom-elementor-template-library-filter-theme").on("change",function(e){var n={};l(this).each(function(e,t){var o=String(l(t).val());-1!==o.indexOf(",")&&(o=o.split(",")),n[l(t).attr("name")]=o}),l(".wpzoom-item, h2.wpzoom-templates-library-template-category").each(function(e,o){var a=!0;l.each(n,function(e,t){null!==t&&("theme"===e&&-1===l(o).data("theme").indexOf(t)||-1===l(o).data(e).indexOf(t))&&(a=!1)}),a?l(o).show():l(o).hide()})}),l(".wpzoom-template-thumb").click(function(){var e=l(this).attr("data-template"),t=jQuery.parseJSON(e),e=l(this).attr("data-restricted-mode");e=null!=e?null:t.id,console.log(e),l(".elementor-templates-modal__header__logo").hide(),l("#wpzoom-elementor-template-library-toolbar").hide(),l("#wpzoom-elementor-template-library-header-preview").show(),l("#wpzoom-elementor-template-library-header-preview").find(".elementor-template-library-template-action").attr("data-template-name",e),l(".wpzoom-header-back-button").show(),a(),l.post(ajaxurl,{action:"get_wpzoom_preview",data:t},function(e){r(),l(".wpzoom__main-view").html(e),i(o)})}),l(".wpzoom-header-back-button").click(function(){l(this).hide(),l("#wpzoom-elementor-template-library-header-preview").hide(),l("#wpzoom-elementor-template-library-toolbar").show(),l(".elementor-templates-modal__header__logo").show(),n()})};function n(){var t={},n=n||null;l(".elementor-templates-modal__header__logo").show(),l("#wpzoom-elementor-template-library-toolbar").show(),l(".wpzoom-header-back-button").hide(),l("#wpzoom-elementor-template-library-header-preview").hide(),a(),null==WPZCached?l.post(ajaxurl,{action:"get_wpzoom_templates_library_view"},function(e){r(),l(".wpzoom__main-view").html(e),WPZCached=e,m(),i(n)}):(r(),l(".wpzoom__main-view").html(WPZCached),m(),i(n));var e=l("#wpzoom-elementor-template-library-filter-theme").val();e&&(t.theme=e,l(".wpzoom-item, h2.wpzoom-templates-library-template-category").each(function(e,o){var a=!0;l.each(t,function(e,t){null!==t&&("theme"===e&&-1===l(o).data("theme").indexOf(t)||-1===l(o).data(e).indexOf(t))&&(a=!1)}),a?l(o).show():l(o).hide()}));e=l("#elementor-preview-iframe").contents().find("#elementor-add-new-section .elementor-add-template-button");e.length&&!e.hasClass("WPZ_template_btn")&&e.hover(function(){l(this).addClass("WPZ_template_btn"),n=-1});e=l("#elementor-preview-iframe").contents().find(".elementor-add-section-inline .elementor-add-template-button");e.length&&e.each(function(){l(this).hasClass("WPZ_template_btn")?(l(this).unbind("hover"),l(this).hover(function(){var t=l(this).parent().parent().parent(),o=l(this).parent().parent().parent().parent().children(),a=[];for(let e=0;e<o.length;e++)"div"==o[e].localName&&o[e]!=t[0]||a.push(o[e]);for(let e=0;e<a.length;e++)a[e]==t[0]&&(n=e)})):l(this).addClass("WPZ_template_btn")})}function m(){var e=["inspiro-homepage","f1-homepage"];"wpzoom-inspiro-pro"==wpzoomElementorAddons.currentTemplate||"inspiro"==wpzoomElementorAddons.currentTemplate&&wpzoomElementorAddons.wpzoomFramework||"foodica-pro"==wpzoomElementorAddons.currentTemplate||"foodica"==wpzoomElementorAddons.currentTemplate&&wpzoomElementorAddons.wpzoomFramework?e=[]:l.each(e,function(e,t){$this=l("#wpzoom-"+t),$this.addClass("locked").prepend('<div class="wpzoom-ribbon">Premium</div>'),$this.find(".wpzoom-btn-template-insert").addClass("wpzoom-restricted"),$this.find(".wpzoom-template-thumb").attr("data-restricted-mode",!0)})}}(jQuery);